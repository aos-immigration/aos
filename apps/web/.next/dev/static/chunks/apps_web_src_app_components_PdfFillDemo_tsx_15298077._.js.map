{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/macbookpro/Documents/projects/aos/apps/web/src/app/components/PdfFillDemo.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useMemo, useState } from \"react\";\n\nconst DEFAULT_API_URL = \"http://localhost:8000\";\n\nexport function PdfFillDemo() {\n  const [givenName, setGivenName] = useState(\"\");\n  const [familyName, setFamilyName] = useState(\"\");\n  const [isSpouse, setIsSpouse] = useState(true);\n  const [isLoading, setIsLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [pdfUrl, setPdfUrl] = useState<string | null>(null);\n\n  const apiBase = useMemo(\n    () => process.env.NEXT_PUBLIC_API_URL || DEFAULT_API_URL,\n    []\n  );\n\n  useEffect(() => {\n    return () => {\n      if (pdfUrl) {\n        globalThis.URL.revokeObjectURL(pdfUrl);\n      }\n    };\n  }, [pdfUrl]);\n\n  async function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n    setIsLoading(true);\n    setError(null);\n\n    try {\n      const payload = {\n        fields: {\n          \"form1[0].#subform[0].Pt2Line4a_FamilyName[0]\": familyName,\n          \"form1[0].#subform[0].Pt2Line4b_GivenName[0]\": givenName,\n        },\n        checkboxes: {\n          \"form1[0].#subform[0].Pt1Line1_Spouse[0]\": isSpouse,\n        },\n      };\n\n      const response = await fetch(`${apiBase}/fill/i-130`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify(payload),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Fill failed (${response.status})`);\n      }\n\n      const blob = await response.blob();\n      const url = globalThis.URL.createObjectURL(blob);\n      if (pdfUrl) {\n        globalThis.URL.revokeObjectURL(pdfUrl);\n      }\n      setPdfUrl(url);\n    } catch (err) {\n      const message =\n        err instanceof Error ? err.message : \"Failed to fill PDF\";\n      setError(message);\n    } finally {\n      setIsLoading(false);\n    }\n  }\n\n  return (\n    <section className=\"rounded-2xl border border-zinc-200 bg-white p-6 shadow-sm dark:border-zinc-800 dark:bg-zinc-950\">\n      <h2 className=\"text-lg font-semibold\">Quick fill demo (I-130)</h2>\n      <p className=\"mt-2 text-sm text-zinc-600 dark:text-zinc-300\">\n        Enter a couple fields and download a filled PDF via the FastAPI service.\n      </p>\n\n      <form onSubmit={handleSubmit} className=\"mt-6 grid gap-4 sm:grid-cols-2\">\n        <label className=\"flex flex-col gap-2 text-sm\">\n          <span>Given name</span>\n          <input\n            value={givenName}\n            onChange={(event) => setGivenName(event.target.value)}\n            className=\"rounded-lg border border-zinc-300 px-3 py-2 text-zinc-900 shadow-sm focus:border-zinc-400 focus:outline-none dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-100\"\n            placeholder=\"Alex\"\n          />\n        </label>\n\n        <label className=\"flex flex-col gap-2 text-sm\">\n          <span>Family name</span>\n          <input\n            value={familyName}\n            onChange={(event) => setFamilyName(event.target.value)}\n            className=\"rounded-lg border border-zinc-300 px-3 py-2 text-zinc-900 shadow-sm focus:border-zinc-400 focus:outline-none dark:border-zinc-700 dark:bg-zinc-900 dark:text-zinc-100\"\n            placeholder=\"Doe\"\n          />\n        </label>\n\n        <label className=\"flex items-center gap-2 text-sm sm:col-span-2\">\n          <input\n            type=\"checkbox\"\n            checked={isSpouse}\n            onChange={(event) => setIsSpouse(event.target.checked)}\n            className=\"h-4 w-4 rounded border-zinc-300 text-zinc-900\"\n          />\n          <span>Filing for spouse (Part 1, Line 1)</span>\n        </label>\n\n        <div className=\"sm:col-span-2 flex items-center gap-3\">\n          <button\n            type=\"submit\"\n            disabled={isLoading}\n            className=\"rounded-lg bg-zinc-900 px-4 py-2 text-sm font-semibold text-white disabled:opacity-70\"\n          >\n            {isLoading ? \"Generating...\" : \"Generate filled PDF\"}\n          </button>\n          {error ? (\n            <span className=\"text-sm text-red-600\">{error}</span>\n          ) : null}\n        </div>\n      </form>\n\n      {pdfUrl ? (\n        <div className=\"mt-6 rounded-lg border border-zinc-200 bg-zinc-50 p-3 dark:border-zinc-800 dark:bg-zinc-900\">\n          <p className=\"text-sm text-zinc-600 dark:text-zinc-300\">\n            Preview (filled PDF)\n          </p>\n          <iframe\n            title=\"Filled I-130 preview\"\n            src={pdfUrl}\n            className=\"mt-3 h-[560px] w-full rounded-md border border-zinc-200 bg-white dark:border-zinc-800\"\n          />\n        </div>\n      ) : null}\n    </section>\n  );\n}\n"],"names":[],"mappings":";;;;AAeU;;AAbV;;;AAFA;;AAIA,MAAM,kBAAkB;AAEjB,SAAS;;IACd,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAgB;IAClD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAgB;IAEpD,MAAM,UAAU,IAAA,wKAAO;wCACrB,IAAM,2KAAO,CAAC,GAAG,CAAC,mBAAmB,IAAI;uCACzC,EAAE;IAGJ,IAAA,0KAAS;iCAAC;YACR;yCAAO;oBACL,IAAI,QAAQ;wBACV,WAAW,GAAG,CAAC,eAAe,CAAC;oBACjC;gBACF;;QACF;gCAAG;QAAC;KAAO;IAEX,eAAe,aAAa,KAAuC;QACjE,MAAM,cAAc;QACpB,aAAa;QACb,SAAS;QAET,IAAI;YACF,MAAM,UAAU;gBACd,QAAQ;oBACN,gDAAgD;oBAChD,+CAA+C;gBACjD;gBACA,YAAY;oBACV,2CAA2C;gBAC7C;YACF;YAEA,MAAM,WAAW,MAAM,MAAM,GAAG,QAAQ,WAAW,CAAC,EAAE;gBACpD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;YACvB;YAEA,IAAI,CAAC,SAAS,EAAE,EAAE;gBAChB,MAAM,IAAI,MAAM,CAAC,aAAa,EAAE,SAAS,MAAM,CAAC,CAAC,CAAC;YACpD;YAEA,MAAM,OAAO,MAAM,SAAS,IAAI;YAChC,MAAM,MAAM,WAAW,GAAG,CAAC,eAAe,CAAC;YAC3C,IAAI,QAAQ;gBACV,WAAW,GAAG,CAAC,eAAe,CAAC;YACjC;YACA,UAAU;QACZ,EAAE,OAAO,KAAK;YACZ,MAAM,UACJ,eAAe,QAAQ,IAAI,OAAO,GAAG;YACvC,SAAS;QACX,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6LAAC;QAAQ,WAAU;;0BACjB,6LAAC;gBAAG,WAAU;0BAAwB;;;;;;0BACtC,6LAAC;gBAAE,WAAU;0BAAgD;;;;;;0BAI7D,6LAAC;gBAAK,UAAU;gBAAc,WAAU;;kCACtC,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;0CAAK;;;;;;0CACN,6LAAC;gCACC,OAAO;gCACP,UAAU,CAAC,QAAU,aAAa,MAAM,MAAM,CAAC,KAAK;gCACpD,WAAU;gCACV,aAAY;;;;;;;;;;;;kCAIhB,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;0CAAK;;;;;;0CACN,6LAAC;gCACC,OAAO;gCACP,UAAU,CAAC,QAAU,cAAc,MAAM,MAAM,CAAC,KAAK;gCACrD,WAAU;gCACV,aAAY;;;;;;;;;;;;kCAIhB,6LAAC;wBAAM,WAAU;;0CACf,6LAAC;gCACC,MAAK;gCACL,SAAS;gCACT,UAAU,CAAC,QAAU,YAAY,MAAM,MAAM,CAAC,OAAO;gCACrD,WAAU;;;;;;0CAEZ,6LAAC;0CAAK;;;;;;;;;;;;kCAGR,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,MAAK;gCACL,UAAU;gCACV,WAAU;0CAET,YAAY,kBAAkB;;;;;;4BAEhC,sBACC,6LAAC;gCAAK,WAAU;0CAAwB;;;;;uCACtC;;;;;;;;;;;;;YAIP,uBACC,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBAAE,WAAU;kCAA2C;;;;;;kCAGxD,6LAAC;wBACC,OAAM;wBACN,KAAK;wBACL,WAAU;;;;;;;;;;;uBAGZ;;;;;;;AAGV;GAhIgB;KAAA"}}]
}